}
write_data2(group, file="R/group.xml")
as.character
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
data <- as.character(data)
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection)
writeChar( data[row, var] , con=file_connection)
writeChar(paste0("</",var,">\n"), con=file_connection)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection)
writeChar( data[row, var] , con=file_connection)
writeChar(paste0("</",var,">\n"), con=file_connection)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection)
writeChar( as.character(data[row, var] ), con=file_connection)
writeChar(paste0("</",var,">\n"), con=file_connection)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(group, file="R/group.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
writeChar( as.character(data[row, var] ), con=file_connection, eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
write_data(serious, file="R/serious.xml")
write_data2(serious, file="R/serious.xml")
traceback()
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
writeChar( x, con=file_connection, eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
writeChar( x, con=file_connection, nchars(x) eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
writeChar( x, con=file_connection, nchars(x),  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
writeChar( x, con=file_connection, nchar(x),  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
?nchar
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
writeChar( x, con=file_connection, nchar(x)[1],  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
nchars <- min(1,nchar(x))
writeChar( x, con=file_connection, nchar2,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
nchars <- min(1,nchar(x))
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
nchars <- max(1,nchar(x))
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
writeChar
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
nchars <- max(1,nchar(x), na.rm = TRUE)
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
nchars <- max(1,nchar(x), na.rm = TRUE)
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
nchars <- max(0,nchar(x), na.rm = TRUE)
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
warnings9)
warnings()
write_data2(serious, file="R/serious.xml")
warnings()
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
nchars <- max(1,nchar(x), na.rm = TRUE)
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
nchars <- max(2,nchar(x), na.rm = TRUE)
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(serious, file="R/serious.xml")
warnings()
as.character(c(0,NA))
is.na(as.character(c(0,NA)))
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
if(is.na(x)){x <- ""}
#nchars <- max(2,nchar(x), na.rm = TRUE)
writeChar( x, con=file_connection,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
write_data2(serious, file="R/serious.xml")
warnings()
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
if(is.na(x)){x <- ""}
nchars <- max(0,nchar(x), na.rm = TRUE)
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
x <- as.character(data[row,var])
if(is.na(x)){x <- " "}
nchars <- max(1,nchar(x), na.rm = TRUE)
writeChar( x, con=file_connection, nchars,  eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
x <- as.character(data[row,var])
if(is.na(x)){
writeChar(paste0("\t<",var,"/>"), con=file_connection, eos=NULL)
} else{
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
writeChar( x, con=file_connection,   eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(group, file="R/group.xml")
}
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
x <- as.character(data[row,var])
if(is.na(x)){
writeChar(paste0("\t<",var,"/>"), con=file_connection, eos=NULL)
} else{
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
writeChar( x, con=file_connection,   eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
}
close(file_connection)
}
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
x <- as.character(data[row,var])
if(is.na(x)){
writeChar(paste0("\t<",var,"/>"), con=file_connection, eos=NULL)
} else{
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
writeChar( x, con=file_connection,   eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(serious, file="R/serious.xml")
write_data2(serious, file="R/serious.xml")
write_data2 <- function(data, file=paste0(deparse(substitute(data)),".xml")){
data_name <- deparse(substitute(data))
var_names <- names(data)
file_connection <- file(file, open="w")
#data <- as.data.frame( lapply(data,as.character) )
writeChar('<?xml version="1.0" encoding="UTF-8"?>\n',con=file_connection, eos=NULL)
for(row in 1:nrow(data)){
writeChar(paste0("<",data_name,">\n"), con=file_connection, eos=NULL)
for( var in var_names){
x <- as.character(data[row,var])
if(is.na(x)){
writeChar(paste0("\t<",var,"/>\n"), con=file_connection, eos=NULL)
} else{
writeChar(paste0("\t<",var,">"), con=file_connection, eos=NULL)
writeChar( x, con=file_connection,   eos=NULL)
writeChar(paste0("</",var,">\n"), con=file_connection, eos=NULL)
}
}
writeChar(paste0("</",data_name,">\n"), con=file_connection, eos=NULL)
}
close(file_connection)
}
write_data2(serious, file="R/serious.xml")
write_data(serious, file="R/serious.xml")
write_data2(serious, file="R/serious.xml")
